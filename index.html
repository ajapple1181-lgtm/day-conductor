<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Day Conductor</title>
  <link rel="stylesheet" href="style.css?v=8" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="brandTitle">DAY CONDUCTOR</div>
      <div class="brandSub">Daily Schedule Planner</div>
    </div>

    <div class="topbarRight">
      <div class="clock" id="clockText">--:--</div>
      <button class="iconBtn" id="btnJumpNow" type="button">NOW</button>
    </div>
  </header>

  <nav class="tabs">
    <button class="tab is-active" data-tab="life" type="button">生活</button>
    <button class="tab" data-tab="study" type="button">勉強</button>
    <button class="tab" data-tab="timeline" type="button">タイムライン</button>
  </nav>

  <main class="main">
    <!-- 生活 -->
    <section class="panel is-active" id="tabLife">
      <div class="card">
        <div class="cardHead">
          <div class="cardTitle">この日のルーチン（その日だけ）</div>
        </div>

        <div class="grid1">
          <label class="field">
            <span class="label">日付</span>
            <input id="lifeDate" type="date" />
          </label>

          <label class="field">
            <span class="label">ルーチン名（自由）</span>
            <input id="routineName" type="text" placeholder="例：通常 / 部活あり / 早帰り…" />
          </label>

          <label class="field">
            <span class="label">授業を入れる</span>
            <select id="routineSchoolOn">
              <option value="on">入れる</option>
              <option value="off">入れない</option>
            </select>
          </label>

          <div class="grid2">
            <label class="field">
              <span class="label">朝の移動 開始</span>
              <input id="routineCommuteAMStart" type="time" />
            </label>
            <label class="field">
              <span class="label">朝の移動 分</span>
              <input id="routineCommuteAMMin" type="number" min="1" step="1" />
            </label>
          </div>

          <div class="grid2">
            <label class="field">
              <span class="label">授業 開始</span>
              <input id="routineSchoolStart" type="time" />
            </label>
            <label class="field">
              <span class="label">授業 終了</span>
              <input id="routineSchoolEnd" type="time" />
            </label>
          </div>

          <div class="grid2">
            <label class="field">
              <span class="label">部活を入れる</span>
              <select id="routineClubOn">
                <option value="off">入れない</option>
                <option value="on">入れる</option>
              </select>
            </label>
            <label class="field">
              <span class="label">部活 開始</span>
              <input id="routineClubStart" type="time" />
            </label>
          </div>

          <label class="field" id="routineClubEndWrap">
            <span class="label">部活 終了</span>
            <input id="routineClubEnd" type="time" />
          </label>

          <label class="field">
            <span class="label">帰りの移動（学校/部活の後）</span>
            <select id="routineReturnMode">
              <option value="60">60分（1回）</option>
              <option value="30x2">30分（2回）</option>
            </select>
          </label>

          <div class="grid1" id="return60Wrap">
            <div class="hint">授業/部活の終了直後に「移動 60分」を自動で置きます。</div>
          </div>

          <div class="grid1" id="return30Wrap" hidden>
            <div class="hint">
              ①授業/部活の終了直後に「移動 30分」<br/>
              ②指定時刻に「移動 30分」→ 直後に「食事 30分」<br/>
              ※勉強は区切り（タスク単位）で分割されます。
            </div>

            <label class="field">
              <span class="label">2回目の移動 開始（17:00〜21:30 / :00 :15 :30）</span>
              <select id="routineReturn2Start"></select>
            </label>
          </div>

          <div class="grid2">
            <label class="field">
              <span class="label">就寝 開始</span>
              <input id="routineSleepStart" type="time" />
            </label>
            <label class="field">
              <span class="label">就寝 分（翌日にまたいでもOK）</span>
              <input id="routineSleepMin" type="number" min="1" step="1" />
            </label>
          </div>

          <div class="hint" id="routineHint" hidden>ルーチンが重複しています（時刻を調整してください）</div>
        </div>
      </div>

      <div class="card">
        <div class="cardHead">
          <div class="cardTitle">生活ブロック（追加）</div>
        </div>

        <div class="grid1">
          <label class="field">
            <span class="label">種類</span>
            <select id="lifeType"></select>
          </label>

          <label class="field" id="lifeCustomWrap" hidden>
            <span class="label">種類（自由入力）</span>
            <input id="lifeCustom" type="text" placeholder="例：買い物、病院…" />
          </label>

          <div class="seg">
            <label class="segItem">
              <input type="radio" name="lifeMode" value="duration" checked />
              <span>分で指定</span>
            </label>
            <label class="segItem">
              <input type="radio" name="lifeMode" value="range" />
              <span>時刻で指定</span>
            </label>
          </div>

          <div class="grid1" id="lifeDurationBox">
            <label class="field">
              <span class="label">開始</span>
              <input id="lifeStart" type="time" />
            </label>
            <label class="field">
              <span class="label">分（編集可）</span>
              <input id="lifeMin" type="number" min="1" step="1" value="30" />
            </label>
          </div>

          <div class="grid2" id="lifeRangeBox" hidden>
            <label class="field">
              <span class="label">開始</span>
              <input id="lifeFrom" type="time" />
            </label>
            <label class="field">
              <span class="label">終了</span>
              <input id="lifeTo" type="time" />
            </label>
          </div>

          <div class="row">
            <button class="btn btnPrimary" id="btnAddLife" type="button">追加</button>
            <button class="btn btnGhost" id="btnClearLifeDay" type="button">この日の追加生活を全消し</button>
          </div>

          <div class="hint" id="lifeAddHint" hidden>追加できません（入力不足 or 重複）</div>
        </div>
      </div>

      <div class="card">
        <div class="cardHead">
          <div class="cardTitle">この日の生活一覧（タッチで編集）</div>
        </div>
        <ul class="list" id="lifeList"></ul>
      </div>
    </section>

    <!-- 勉強 -->
    <section class="panel" id="tabStudy">
      <div class="card">
        <div class="cardHead">
          <div class="cardTitle">今日やる勉強（入力）</div>
        </div>

        <div class="grid1">
          <label class="field">
            <span class="label">日付</span>
            <input id="studyDate" type="date" />
          </label>

          <label class="field">
            <span class="label">系</span>
            <select id="studyCategory"></select>
          </label>

          <label class="field">
            <span class="label">科目</span>
            <select id="studySubject" disabled></select>
          </label>

          <label class="field" id="studyOtherSubjectWrap" hidden>
            <span class="label">科目名（その他）</span>
            <input id="studyOtherSubject" type="text" placeholder="例：情報、保健、探究…" />
          </label>

          <label class="field">
            <span class="label">タスク内容</span>
            <select id="studyTaskType" disabled></select>
          </label>

          <label class="field" id="studyTaskFreeWrap" hidden>
            <span class="label">タスク内容（自由入力）</span>
            <input id="studyTaskFree" type="text" placeholder="例：ノートまとめ、演習…" />
          </label>

          <div class="cardMini">
            <div class="miniHead">
              <div class="miniTitle">範囲（開始 / 終了）</div>
              <button class="btn btnGhost" id="btnAddRange" type="button">＋</button>
            </div>
            <div id="rangesList" class="ranges"></div>
          </div>

          <label class="field">
            <span class="label">見積（分）</span>
            <input id="studyMin" type="number" min="1" step="1" value="30" />
          </label>

          <label class="field">
            <span class="label">終了希望（任意）</span>
            <input id="studyDeadline" type="time" />
          </label>

          <div class="row">
            <button class="btn btnPrimary" id="btnAddStudy" type="button">追加</button>
            <button class="btn btnGhost" id="btnClearStudyDay" type="button">この日の勉強を全消し</button>
          </div>

          <div class="hint" id="studyAddHint" hidden>入力が足りません</div>
        </div>
      </div>

      <div class="card">
        <div class="cardHead">
          <div class="cardTitle">この日の勉強リスト（タッチで編集）</div>
          <div class="cardTools">
            <button class="btn btnGhost" id="btnRecalc" type="button">見積を自動更新</button>
          </div>
        </div>

        <ul class="list" id="studyList"></ul>
        <div class="hint" id="overflowHint" hidden>入り切らない勉強は翌日に繰り越されます</div>

        <div class="row" style="margin-top:12px;">
          <button class="btn btnPrimary" id="btnAutoBuild" type="button" style="width:100%;">自動で組み立て（授業終了〜就寝）</button>
        </div>
      </div>
    </section>

    <!-- タイムライン -->
    <section class="panel" id="tabTimeline">
      <div class="card">
        <div class="cardHead">
          <div class="cardTitle">タイムライン（タッチで編集）</div>
        </div>

        <div class="timelineWrap">
          <div class="timeline" id="timeline"></div>
        </div>

        <div class="hint">スクロールで日が増えます。現在時刻は破線です。</div>
      </div>
    </section>
  </main>

  <!-- Editor Sheet -->
  <div class="sheet" id="editor" hidden>
    <div class="sheetCard">
      <div class="sheetHead">
        <div class="sheetTitle" id="editorTitle">編集</div>
        <button class="btn btnGhost" id="editorCancel" type="button">キャンセル</button>
      </div>
      <div class="sheetBody" id="editorBody"></div>
      <div class="sheetFoot" id="editorFoot"></div>
    </div>
  </div>

  <script src="app.js?v=8"></script>
</body>
              </html>
